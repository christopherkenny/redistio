<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Interactive Redistricting â€¢ redistio</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Interactive Redistricting">
<meta name="description" content="A point and click editor for districts built on shiny and mapgl. Users can draw districts and calculate standard redistricting metrics, like compactness or the number of administrative splits. Maps can be exported as assignment files or shapefiles, readable by most other redistricting software.">
<meta property="og:description" content="A point and click editor for districts built on shiny and mapgl. Users can draw districts and calculate standard redistricting metrics, like compactness or the number of administrative splits. Maps can be exported as assignment files or shapefiles, readable by most other redistricting software.">
<meta property="og:image" content="http://www.christophertkenny.com/redistio/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">redistio</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/christopherkenny/redistio/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="redistio-">redistio 
<a class="anchor" aria-label="anchor" href="#redistio-"></a>
</h1>
</div>
<!-- badges: start -->

<p><code>redistio</code> provides a point-and-click districting interface powered by <a href="https://shiny.posit.co/" class="external-link">Shiny</a> and <a href="https://github.com/walkerke/mapgl" class="external-link">mapgl</a>. For regular <code>sf</code> objects, it can be used to draw districts and export assignment files. For <code>redist_map</code> objects, algorithmic assistance is enabled for map drawing. It also includes an interactive adjacency graph editor via <code><a href="reference/adj_editor.html">adj_editor()</a></code>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>redistio</code> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">'christopherkenny/redistio'</span><span class="op">)</span></span></code></pre></div>
<p>Or from <a href="https://christopherkenny.r-universe.dev/" class="external-link">R-universe</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'redistio'</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://christopherkenny.r-universe.dev'</span>, <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The most basic application of <code>redistio</code> starts with an <code>sf</code> tibble and a column of district assignments.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/christopherkenny/redistio" class="external-link">redistio</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/draw.html">draw</a></span><span class="op">(</span><span class="va">dc</span>, <span class="va">dc</span><span class="op">$</span><span class="va">ward</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/example_interactive.png"></p>
</div>
<div class="section level2">
<h2 id="plans-browser-and-comparisons">Plans Browser and Comparisons<a class="anchor" aria-label="anchor" href="#plans-browser-and-comparisons"></a>
</h2>
<p>When working with <code>redist_map</code> objects and <code>redist_plans</code>, you can pass pre-computed plans to <code><a href="reference/draw.html">draw()</a></code> for browsing and comparison. This enables two additional tabs in the app:</p>
<ul>
<li>
<strong>Plans</strong>: Browse and preview simulated plans on the map, and adopt any plan as your current working plan.</li>
<li>
<strong>Comparisons</strong>: Compare your current plan against the simulated plans using summary statistics and plots.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/christopherkenny/redistio" class="external-link">redistio</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://alarm-redist.org/redist/" class="external-link">redist</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">map</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://alarm-redist.org/redist/reference/redist_map.html" class="external-link">redist_map</a></span><span class="op">(</span><span class="va">dc</span>, existing_plan <span class="op">=</span> <span class="va">ward</span><span class="op">)</span></span>
<span><span class="va">plans</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://alarm-redist.org/redist/reference/redist_smc.html" class="external-link">redist_smc</a></span><span class="op">(</span><span class="va">map</span>, nsims <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/draw.html">draw</a></span><span class="op">(</span><span class="va">map</span>, init_plan <span class="op">=</span> <span class="va">map</span><span class="op">$</span><span class="va">ward</span>, plans <span class="op">=</span> <span class="va">plans</span>, plans_fn <span class="op">=</span> <span class="va">add_plan_stats</span><span class="op">)</span></span></code></pre></div>
<p>The <code>plans_fn</code> argument accepts a function that adds the current plan to the <code>redist_plans</code> object and computes summary statistics for comparison. The built-in <code><a href="reference/add_plan_stats.html">add_plan_stats()</a></code> function handles this automatically, computing statistics like population parity, compactness, partisan metrics, and administrative splits to match whatever columns are present in <code>plans</code>.</p>
</div>
<div class="section level2">
<h2 id="adjacency-editor">Adjacency Editor<a class="anchor" aria-label="anchor" href="#adjacency-editor"></a>
</h2>
<p><code>redistio</code> includes an interactive adjacency graph editor for fixing adjacency issues in your data (e.g., removing edges across rivers or adding edges for missing connections):</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/christopherkenny/redistio" class="external-link">redistio</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/adj_editor.html">adj_editor</a></span><span class="op">(</span><span class="va">dc</span>, init_plan <span class="op">=</span> <span class="va">dc</span><span class="op">$</span><span class="va">ward</span><span class="op">)</span></span></code></pre></div>
<p>The editor lets you add or remove edges by clicking pairs of precincts, and provides an export tab with an edit log and reproducible code using <code>geomander</code> functions.</p>
</div>
</div>
<div class="section level1">
<h1 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h1>
<div class="section level2">
<h2 id="editor-options">Editor options<a class="anchor" aria-label="anchor" href="#editor-options"></a>
</h2>
<p>The editor can be configured primarily through <code><a href="reference/redistio_options.html">redistio_options()</a></code>. Some configurable options:</p>
<ul>
<li>
<code>theme</code>: the <a href="https://rstudio.github.io/bslib/" class="external-link">bslib</a> theme to use</li>
<li>
<code>panels</code>: which panels to include. Allows for removing panels like <code>elections</code>, if drawing districts in a party-blind manner</li>
<li>
<code>palette_party</code>: the colors to use for partisan maps</li>
<li>
<code>palette_pop</code>: the colors to use for population maps</li>
<li>
<code>palette_pct</code>: the colors to use for percentage maps. Diverging palettes are recommended.</li>
<li>
<code>map_tiles</code>: the base map style function to use from <a href="https://walker-data.com/mapgl/reference/index.html#styling-helpers" class="external-link">mapgl</a>
</li>
<li>
<code>use_algorithms</code>: whether to enable algorithmic assistance for map drawing. Requires a <code>redist_map</code> object.</li>
<li>
<code>alg_max_districts</code>: the maximum number of districts allowed in algorithmic simulations</li>
<li>
<code>alg_max_sims</code>: the maximum number of simulations allowed in algorithmic simulations</li>
<li>
<code>use_plans</code>: whether to show the plans browser tab when <code>plans</code> is provided to <code><a href="reference/draw.html">draw()</a></code>
</li>
<li>
<code>use_comparisons</code>: whether to show the comparisons tab when <code>plans</code> and <code>plans_fn</code> are provided to <code><a href="reference/draw.html">draw()</a></code>
</li>
<li>
<code>use_planscore</code>: whether to use the <a href="https://planscore.org/" class="external-link">PlanScore API</a> to evaluate plans. Requires internet access and a PlanScore key.</li>
<li>
<code>locked_districts</code>: districts to lock at app start, preventing edits to those districts</li>
<li>
<code>projection</code>: the Maplibre map projection to use (default is <code>'mercator'</code>)</li>
</ul>
</div>
<div class="section level2">
<h2 id="data-dependent-options">Data Dependent Options<a class="anchor" aria-label="anchor" href="#data-dependent-options"></a>
</h2>
<p>Several data-based options may be configured inside <code><a href="reference/draw.html">draw()</a></code>:</p>
<ul>
<li>
<code>layers</code>: Columns to use as toggle layers, where you can show things like county lines above the shapes</li>
<li>
<code>elect_cols</code>: Specify election columns directly. This use a guessing approach which follows the ALARM Project column naming schema by default.</li>
<li>
<code>demog_cols</code>: Specify demographic columns directly. This use a guessing approach which follows the ALARM Project column naming schema by default.</li>
<li>
<code>split_cols</code>: Specify columns which contain administrative units to check splits for.</li>
<li>
<code>hover_fn</code>: A function to display precinct-data based on the row of <code>shp</code> that the mouse is over.</li>
<li>
<code>plans</code>: A <code>redist_plans</code> object for browsing and comparison.</li>
<li>
<code>plans_fn</code>: A function to add a reference plan and compute summary statistics (e.g., <code><a href="reference/add_plan_stats.html">add_plan_stats()</a></code>).</li>
</ul>
</div>
<div class="section level2">
<h2 id="more-complex-apps">More complex apps<a class="anchor" aria-label="anchor" href="#more-complex-apps"></a>
</h2>
<p>These features allow for analyzing more complex maps, with live comparisons with simulations. For example, with the following code, you can have many more options:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/christopherkenny/redistio" class="external-link">redistio</a></span><span class="op">)</span></span>
<span><span class="va">nj</span> <span class="op">&lt;-</span> <span class="fu">alarmdata</span><span class="fu">::</span><span class="fu"><a href="http://alarm-redist.org/alarmdata/reference/alarm_50state.html" class="external-link">alarm_50state_map</a></span><span class="op">(</span><span class="st">'NJ'</span><span class="op">)</span></span>
<span><span class="va">pl</span> <span class="op">&lt;-</span> <span class="fu">alarmdata</span><span class="fu">::</span><span class="fu"><a href="http://alarm-redist.org/alarmdata/reference/alarm_50state.html" class="external-link">alarm_50state_plans</a></span><span class="op">(</span><span class="st">'NJ'</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/draw.html">draw</a></span><span class="op">(</span></span>
<span>  <span class="va">nj</span>,</span>
<span>  init_plan <span class="op">=</span> <span class="va">nj</span><span class="op">$</span><span class="va">cd_2020</span>,</span>
<span>  palette <span class="op">=</span> <span class="fu">ggredist</span><span class="fu">::</span><span class="va"><a href="https://alarm-redist.github.io/ggredist/reference/ggredist.html" class="external-link">ggredist</a></span><span class="op">$</span><span class="va">alaska</span>,</span>
<span>  layers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>County <span class="op">=</span> <span class="st">'county'</span><span class="op">)</span>,</span>
<span>  plans <span class="op">=</span> <span class="va">pl</span>,</span>
<span>  plans_fn <span class="op">=</span> <span class="va">add_plan_stats</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/example_interactive_nj.png"></p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/christopherkenny/redistio/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/christopherkenny/redistio/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing redistio</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Christopher T. Kenny <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9386-6860" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Cory McCartan <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-6251-669X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://christopherkenny.r-universe.dev/ui#package:redistio" class="external-link"><img src="https://christopherkenny.r-universe.dev/badges/redistio" alt="r-universe status badge"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg"></a></li>
<li><a href="https://github.com/christopherkenny/redistio/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/christopherkenny/redistio/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/christopherkenny/redistio" class="external-link"><img src="https://codecov.io/gh/christopherkenny/redistio/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher T. Kenny, Cory McCartan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
